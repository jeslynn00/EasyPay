<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
        <link rel="stylesheet" type="text/css" href="swipe.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
        <title>Scan to Pay</title>
        <style>
                
            .btn1 {
                font-size: xx-large;
                background-color: white;
                border: 0;
                a{text-decoration: none; color: black;}

            }
            table, td {
                border:1px solid black;
                font-size: larger;
                padding: 20px;

            }
            input {
                font-size: large;
            }

        </style>
    </head>
    <body>
        <button class="btn1" type="button"><a href="finance.html">⇦ Pay To</a></button>
        <br><br>
        <br>
        <br>
        <table style="width: 50%;">
            <tr>
                <td>
                    <b>From :</b> <br>
                    Ewallet (Balance : <span id="balance">Loading...</span>)
                    <script>
                        // Function to load the balance from localStorage
                        function loadBalance() {
                            const balance = localStorage.getItem('balance');
                            document.getElementById('balance').innerText = `$${(parseFloat(balance) || 1000.00).toFixed(2)}`;
                        }
                
                        // Load balance when the page loads
                        window.onload=loadBalance;
                        
                    </script>
                </td>
            </tr>
            <tr>
                <td>
                    <b>Amount :</b> <br>
                    <input type="number" id="amount" value="32.41" step="0.01"/>
                </td>
            </tr>
            <tr>
                <td>
                    <b>To :</b> <br>
                    <input type="text" value="Bak Kut Teh Shop"/>                    
                </td>
            </tr>
        </table>
        <br>
        <br>
        <div class="swipe1">
            <div id="button-background">
                <span class="slide-text">Swipe</span>
                <div id="slider" onmouseleave="deduct()">
                    <i id="locker" class="material-icons" >➡</i>
                </div>
            </div>
        </div>
        <script>
            // Function to deduct the balance in localStorage
            function deduct() {
                // Get the input value
                const amountInput = document.getElementById('amount').value;
                const amount = parseFloat(amountInput);
                
                if (amount < 0) {
                    alert("Please enter a valid number.");
                    return;
                }

                // Get the current balance from localStorage
                let balance = parseFloat(localStorage.getItem('balance')) || 1000.00;

                // Update the balance
                balance = balance - amount;

                // Save the updated balance to localStorage
                localStorage.setItem('balance', balance.toFixed(2));
                
            }
        </script>
        <script src="/swipe.js"></script>

    </body> 
</html>